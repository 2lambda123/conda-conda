[tox]
envlist =
    local
package = conda

[testenv]
sitepackages = True
skipsdist = False
recreate = True
deps =
    mock
    pyflakes
    pytest
    pytest-cov
    radon
commands =
    pip freeze
    radon cc -nb --total-average -s {[tox]package} {posargs}
    radon mi -na -m -s {[tox]package} {posargs}
    py.test -m "not installed" --cov {[tox]package} --cov-report xml tests {posargs}


[testenv:local]
sitepackages = True
skipsdist = True
whitelist_externals = py.test
commands =
    {toxinidir}/utils/clean {toxinidir}
    py.test --cov {[tox]package} tests {posargs}
    radon cc -nb --total-average -s {[tox]package} {posargs}
    radon mi -na -m -s {[tox]package} {posargs}


[testenv:devenv]
envdir = ve
basepython = python3.5
usedevelop = True
commands =
