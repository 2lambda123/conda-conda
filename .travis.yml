language: python
sudo: false

addons:
  apt:
    packages:
      - zsh

matrix:
  include:
    - os: linux
      sudo: required
      python: '2.7'
      env: TOXENV=py27
    - os: linux
      sudo: required
      python: '3.4'
      env: TOXENV=py34
    - os: linux
      sudo: required
      python: '3.5'
      env: TOXENV=py35
    - os: osx
      language: generic
      env: TOXENV=py27
    - os: osx
      language: generic
      env: TOXENV=py34
    - os: osx
      language: generic
      env: TOXENV=py35

before_install:
  - source utils/travis_bootstrap_conda.sh
  - uname -a

install:
  - conda install pycosat
  - conda install pycrypto
  - printenv
  - python --version
  - python setup.py sdist
  - echo $PATH
  - which -a python
  - which -a pip
  - pip install -U tox
  - which -a tox
  - cat $HOME/.conda/envs/test-environment/bin/tox

script:
  - printenv
  - which -a tox
  - tox -v

after_success:
  - pip install codecov
  - codecov --env TOX_ENV
