language: python
sudo: false

addons:
  apt:
    packages:
      - zsh

env:
  global: PYTHONUNBUFFERED=yes

matrix:
  include:
    - os: linux
      sudo: required
      python: '2.7'
      env: TOXENV=py27 PYCOSAT=0.6.1
    - os: linux
      sudo: required
      python: '2.7'
      env: TOXENV=py27
    - os: linux
      sudo: required
      python: '3.4'
      env: TOXENV=py34 PYCOSAT=0.6.1
    - os: linux
      sudo: required
      python: '3.4'
      env: TOXENV=py34
    - os: linux
      sudo: required
      python: '3.5'
      env: TOXENV=py35
    - os: osx
      language: generic
      env: TOXENV=py27 PYCOSAT=0.6.1
    - os: osx
      language: generic
      env: TOXENV=py27
    - os: osx
      language: generic
      env: TOXENV=py34 PYCOSAT=0.6.1
    - os: osx
      language: generic
      env: TOXENV=py34
    - os: osx
      language: generic
      env: TOXENV=py35

before_install:
  - source utils/travis_bootstrap_conda.sh
  - uname -a

install:
  - [[ "$PYCOSAT" ]] && conda install pycosat="$PYCOSAT"
  - conda install pycrypto

script:
  - tox -v

after_success:
  - pip install codecov
  - codecov --env TOX_ENV
